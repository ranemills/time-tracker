{"version":3,"sources":["../src/scripts/app.js"],"names":["angular","module","run","activityService","recordService","init","controller","mainCtrl","$onInit","showEdit","saveTime","addRecord","recordPendingSave","recordTime","startTime","endTime","duration","diff","activity","getSelectedActivity","note","discardActivity","getRecords","constant","window","_","service","storageService","STORAGE_DEFINED_ACTIVITIES","selectedActivity","definedActivities","getValue","setSelectedActivity","getDefinedActivities","addDefinedActivity","push","setValue","STORAGE_RECORDED_ACTIVITIES","records","data","$window","key","localStorage","setItem","JSON","stringify","parse","getItem","clear","component","templateUrl","bindings","controllerAs","activitySelectorCtrl","changeActivity","getActivities","newActivityName","getButtonStyle","addActivity","timePieChartCtrl","labels","chartData","equals","cachedRecords","clone","transform","result","record","get","size","keys","cachedData","values","$scope","timeChartCtrl","options","scales","yAxes","display","ticks","beginAtZero","onStop","moment","isTiming","start","$broadcast","stop","$on","bind","event","onSave","onCancel","editActivityCtrl","activityTypes","settingsCtrl","location","reload"],"mappings":"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","file":"app.js","sourcesContent":["angular.module('timeTrackerApp', ['angularMoment', 'timer', 'chart.js'])\n.run(function(activityService, recordService) {\n  activityService.init();\n  recordService.init();\n})\n.controller('mainCtrl', function (recordService, activityService) {\n  let mainCtrl = this;\n\n  mainCtrl.$onInit = function() {\n    mainCtrl.showEdit = false;\n  };\n\n  mainCtrl.saveTime = function() {\n    recordService.addRecord(mainCtrl.recordPendingSave);\n    mainCtrl.showEdit = false;\n    mainCtrl.recordPendingSave = null;\n  };\n\n  mainCtrl.recordTime = function(startTime, endTime) {\n    mainCtrl.showEdit = true;\n    mainCtrl.recordPendingSave = {\n      startTime,\n      endTime,\n      duration: endTime.diff(startTime),\n      activity: activityService.getSelectedActivity(),\n      note: ''\n    }\n  };\n\n  mainCtrl.discardActivity = function() {\n    mainCtrl.showEdit = false;\n    mainCtrl.recordPendingSave = null;\n  };\n\n  mainCtrl.getRecords = recordService.getRecords;\n\n})\n.constant('_', window._)\n.service('activityService', function(storageService) {\n  const STORAGE_DEFINED_ACTIVITIES = \"DEFINED_ACTIVITIES\";\n\n  let selectedActivity = '';\n  let definedActivities = [];\n\n  function init() {\n    definedActivities = storageService.getValue(STORAGE_DEFINED_ACTIVITIES) || ['Default'];\n  }\n\n  function getSelectedActivity() {\n    return selectedActivity;\n  }\n\n  function setSelectedActivity(activity) {\n    selectedActivity = activity;\n  }\n\n  function getDefinedActivities() {\n    return definedActivities;\n  }\n\n  function addDefinedActivity(activity) {\n    definedActivities.push(activity);\n    storageService.setValue(STORAGE_DEFINED_ACTIVITIES, definedActivities);\n  }\n\n  return {\n    init,\n    getSelectedActivity,\n    setSelectedActivity,\n    getDefinedActivities,\n    addDefinedActivity\n  }\n})\n.service('recordService', function(storageService) {\n  const STORAGE_RECORDED_ACTIVITIES = \"RECORDED_ACTIVITIES\";\n\n  // Record format: { startDate, endDate, duration, activity }\n\n  let records = [];\n\n  function init() {\n    records = storageService.getValue(STORAGE_RECORDED_ACTIVITIES) || [];\n  }\n\n  function getRecords() {\n    return records;\n  }\n\n  function addRecord(data) {\n    records.push(data);\n    storageService.setValue(STORAGE_RECORDED_ACTIVITIES, records);\n  }\n\n  return {\n    init,\n    getRecords,\n    addRecord\n  }\n})\n.service('storageService', function(_, $window) {\n\n  function setValue(key, data) {\n    $window.localStorage.setItem(key, JSON.stringify(data));\n  }\n\n  function getValue(key) {\n    return JSON.parse($window.localStorage.getItem(key));\n  }\n\n  function clear() {\n    $window.localStorage.clear();\n  }\n\n  return {\n    setValue,\n    getValue,\n    clear\n  }\n\n})\n.component('charts', {\n  templateUrl: 'components/charts.html',\n  bindings: {\n    records: '<'\n  },\n  controllerAs: 'chartsCtrl',\n  controller: function() {\n\n  }\n})\n.component('activitySelector', {\n  templateUrl: 'components/activity-selector.html',\n  bindings: {},\n  controllerAs: 'activitySelectorCtrl',\n  controller: function(activityService) {\n    let activitySelectorCtrl = this;\n\n    activitySelectorCtrl.$onInit = function() {\n      activitySelectorCtrl.changeActivity(activitySelectorCtrl.getActivities()[0]);\n      activitySelectorCtrl.newActivityName = '';\n    };\n\n    activitySelectorCtrl.getActivities = activityService.getDefinedActivities;\n\n    activitySelectorCtrl.getButtonStyle  = function(activity) {\n      return activity === activityService.getSelectedActivity() ? 'active' : '';\n    };\n\n    activitySelectorCtrl.changeActivity = function(activity) {\n      activityService.setSelectedActivity(activity);\n    };\n\n    activitySelectorCtrl.addActivity = function() {\n      activityService.addDefinedActivity(activitySelectorCtrl.newActivityName);\n      activityService.setSelectedActivity(activitySelectorCtrl.newActivityName);\n      activitySelectorCtrl.newActivityName = '';\n    }\n  }\n})\n.component('timePieChart', {\n  templateUrl: 'components/time-pie-chart.html',\n  bindings: {\n    records: '<'\n  },\n  controllerAs: 'timePieChartCtrl',\n  controller: function() {\n    let timePieChartCtrl = this;\n\n    timePieChartCtrl.$onInit = function() {\n      timePieChartCtrl.labels = ['All'];\n    };\n\n    timePieChartCtrl.chartData = function() {\n      if(!angular.equals(timePieChartCtrl.records, timePieChartCtrl.cachedRecords))\n      {\n        timePieChartCtrl.cachedRecords = _.clone(timePieChartCtrl.records);\n\n        let data = _.transform(timePieChartCtrl.records, function(result, record) {\n          result[record.activity] = _.get(result, record.activity, 0) + record.duration/1000;\n        }, {});\n\n        if(_.size(data) !== 0) {\n          timePieChartCtrl.labels = _.keys(data);\n          timePieChartCtrl.cachedData =  _.values(data);\n        } else {\n          timePieChartCtrl.labels = ['N/A'];\n          timePieChartCtrl.cachedData = [0];\n        }\n      }\n      return timePieChartCtrl.cachedData;\n    }\n  }\n})\n.component('timeChart', {\n  templateUrl: 'components/time-chart.html',\n  bindings: {\n    records: '<'\n  },\n  controllerAs: 'timeChartCtrl',\n  controller: function($scope, _) {\n    let timeChartCtrl = this;\n\n    timeChartCtrl.$onInit = function() {\n      timeChartCtrl.labels = ['All'];\n      timeChartCtrl.options = {\n        scales: {\n          yAxes: [{\n            display: true,\n            ticks: {\n              beginAtZero: true\n            }\n          }]\n        }\n      }\n    };\n\n    timeChartCtrl.chartData = function() {\n      if(!angular.equals(timeChartCtrl.records, timeChartCtrl.cachedRecords))\n      {\n        timeChartCtrl.cachedRecords = _.clone(timeChartCtrl.records);\n\n        let data = _.transform(timeChartCtrl.records, function(result, record) {\n          result[record.activity] = _.get(result, record.activity, 0) + record.duration/1000;\n        }, {});\n\n        if(_.size(data) !== 0) {\n          timeChartCtrl.labels = _.keys(data);\n          timeChartCtrl.cachedData =  _.values(data);\n        } else {\n          timeChartCtrl.labels = ['N/A'];\n          timeChartCtrl.cachedData = [0];\n        }\n      }\n      return timeChartCtrl.cachedData;\n    }\n  }\n})\n.component('recordTable', {\n  templateUrl: 'components/records-table.html',\n  bindings: {\n    records: '<'\n  },\n  controllerAs: 'recordTableCtrl',\n  controller: function() {\n    this.getRecords = () => this.records;\n  }\n})\n.component('timerComponent', {\n  templateUrl: 'components/timer.html',\n  bindings: {\n    onStop: '&'\n  },\n  controllerAs: 'timerCtrl',\n  controller: function ($scope, moment) {\n\n    this.$onInit = function() {\n      this.isTiming = false;\n      this.startTime = null;\n      this.endTime = null;\n    };\n\n    this.start = function () {\n      $scope.$broadcast('timer-start');\n      this.startTime = moment();\n      this.isTiming = true;\n    };\n\n    this.stop = function () {\n      $scope.$broadcast('timer-stop');\n    };\n\n    // Once we know that the timer has stopped, we can do stuff with it\n    $scope.$on('timer-stopped', angular.bind(this, function (event, data) {\n      this.endTime = moment();\n      this.isTiming = false;\n      this.onStop({startTime: this.startTime, endTime: this.endTime});\n    }));\n  }\n})\n.component('editActivityComponent', {\n  templateUrl: 'components/edit-activity.html',\n  bindings: {\n    activity: '<',\n    onSave: '&',\n    onCancel: '&'\n  },\n  controllerAs: 'editActivityCtrl',\n  controller: function (activityService) {\n    let editActivityCtrl = this;\n\n    editActivityCtrl.$onInit = function() {\n      editActivityCtrl.activityTypes = activityService.getDefinedActivities();\n    }\n  }\n})\n.component('settingsComponent', {\n  templateUrl: 'components/settings.html',\n  bindings: {},\n  controllerAs: 'settingsCtrl',\n  controller: function ($window, storageService) {\n    let settingsCtrl = this;\n\n    settingsCtrl.clear = function() {\n      storageService.clear();\n      $window.location.reload();\n    }\n  }\n});"]}